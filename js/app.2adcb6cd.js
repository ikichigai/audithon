(function(t){function e(e){for(var r,o,u=e[0],s=e[1],c=e[2],l=0,f=[];l<u.length;l++)o=u[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);d&&d(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},o={app:0},a={app:0},i=[];function u(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-ffe64214":"d53a902a"}[t]+".js"}function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={"chunk-ffe64214":1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise((function(e,n){for(var r="css/"+({}[t]||t)+"."+{"chunk-ffe64214":"f9f136f1"}[t]+".css",a=s.p+r,i=document.getElementsByTagName("link"),u=0;u<i.length;u++){var c=i[u],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===r||l===a))return e()}var f=document.getElementsByTagName("style");for(u=0;u<f.length;u++){c=f[u],l=c.getAttribute("data-href");if(l===r||l===a)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var r=e&&e.target&&e.target.src||a,i=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete o[t],d.parentNode.removeChild(d),n(i)},d.href=a;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){o[t]=0})));var r=a[t];if(0!==r)if(r)e.push(r[2]);else{var i=new Promise((function(e,n){r=a[t]=[e,n]}));e.push(r[2]=i);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=u(t);var f=new Error;c=function(e){l.onerror=l.onload=null,clearTimeout(d);var n=a[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;f.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",f.name="ChunkLoadError",f.type=r,f.request=o,n[1](f)}a[t]=void 0}};var d=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(e)},s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var f=0;f<c.length;f++)e(c[f]);var d=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"12a8":function(t,e,n){},"158d":function(t,e,n){},"1b1b":function(t,e,n){"use strict";n("12a8")},"1dd4":function(t,e,n){"use strict";var r=n("5530"),o=n("53ca"),a=n("3835"),i=(n("d3b7"),n("3ca3"),n("ddb0"),n("5319"),n("ac1f"),n("bc3a")),u=n.n(i),s=null,c="production",l="config/{env}.json",f=u.a.create(),d={data:null,rev:"n/a",init:function(){var t=this;return s||(s=new Promise((function(e,n){return Promise.all([t._loadEnv(c),t._loadRev()]).then((function(i){var u=Object(a["a"])(i,2),s=u[0],c=u[1];if("object"!=Object(o["a"])(s.data))return n("Bad config file");t.data=Object(r["a"])({},s.data),t.rev=c.data.rev,e(t.data)}))}))),s},_loadEnv:function(t){return f.request({method:"get",url:l.replace("{env}",t)})},_loadRev:function(){return f.get("revision.json")}};e["a"]=d},2179:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("53ca"),o=n("5530"),a=n("d4ec"),i=n("bee2"),u=(n("d3b7"),n("c740"),n("a434"),n("159b"),n("4de4"),n("bc3a")),s=n.n(u),c=0,l=function(){function t(e){Object(a["a"])(this,t),this._requests=[],this.options=e,this.axios=s.a.create(this.options)}return Object(i["a"])(t,[{key:"request",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"get",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=s.a.CancelToken,l=u.source(),f=c++,d=Object(o["a"])({method:a,url:t,cancelToken:l.token},i);d["get"==a?"params":"data"]=n;var h=new Promise((function(t,n){e._registerRequest(f,l),e.axios.request(d).then((function(n){e._unregisterRequest(f),e.isResponseCorrect(n)?t(r?r(n):n):e.goToAuth()})).catch((function(t){s.a.isCancel(t)&&console.log("Request canceled",t),e._unregisterRequest(f),n(t)}))}));return h.id=f,h}},{key:"cancelRequest",value:function(t){var e=this._requests.findIndex((function(e){return e.id==t}));if(!(e<0)){var n=this._requests[e];n.source.cancel("canceled"),this._requests.splice(e,1)}}},{key:"isResponseCorrect",value:function(t){return"object"===Object(r["a"])(t.data)||"OK"===t.data}},{key:"goToAuth",value:function(){document.location.href=this.getBaseUrl()+"/auth/?redirect="+document.baseURI}},{key:"cancelAllRequests",value:function(){this._requests.forEach((function(t){t.source.cancel("canceled")})),this._requests=[]}},{key:"buildURL",value:function(){return this.options.baseURL}},{key:"getBaseUrl",value:function(){return this.options.baseURL}},{key:"_registerRequest",value:function(t,e){this._requests.push({id:t,source:e})}},{key:"_unregisterRequest",value:function(t){this._requests=this._requests.filter((function(e){return e.id!=t}))}}]),t}()},"24d6":function(t,e,n){"use strict";n("d7cc")},3321:function(t,e,n){"use strict";n("158d")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view",{attrs:{name:"header",title:t.title}}),n("transition",{attrs:{name:"app-router-fade",mode:"out-in"}},[n("router-view",{key:t.defaultViewKey})],1),n("router-view",{attrs:{name:"footer"}})],1)},a=[],i=(n("b0c0"),{computed:{defaultViewKey:function(){return this.$route.name},title:function(){return this.$route.meta.title}},created:function(){},mounted:function(){}}),u=i,s=(n("034f"),n("2877")),c=Object(s["a"])(u,o,a,!1,null,null,null),l=c.exports,f=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("NavigationMenu",{attrs:{"collapsed-on-start":!t.showNavigationMenu}}),n("logout")],1)},h=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navigation-menu",class:{collapsed:t.collapsed}},[n("div",{staticClass:"menu-button",on:{click:function(e){return e.stopPropagation(),t.toggleMenu(e)}}},[n("v-icon",{attrs:{name:"bars"}})],1),n("div",{staticClass:"menu-sidebar"},[n("navigation-list",{attrs:{routes:t.routes}})],1)])},m=[],v=(n("4de4"),n("7db0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navigation-list"},t._l(t.menuItems,(function(e,r){return n("div",{key:r,staticClass:"navigation-item",class:{selected:e.name===t.routeValue.name},attrs:{title:e.meta.title},on:{click:function(n){return n.target!==n.currentTarget?null:t.onItemClick(e,n)}}},[e.children.length?n("div",{staticClass:"expand-items"},[e.showChildren?n("v-icon",{staticClass:"icon",attrs:{name:"chevron-up"}}):n("v-icon",{staticClass:"icon",attrs:{name:"chevron-down"}})],1):t._e(),n("router-link",{staticClass:"navigation-link",attrs:{to:{path:e.path}}},[n("span",{on:{click:function(n){return n.target!==n.currentTarget?null:t.onItemClick(e,n)}}},[t._v(t._s(e.meta.title))])]),e.showChildren?n("div",{staticClass:"sub-items-list"},[n("navigation-list",{attrs:{routes:e.children,depth:t.depth+1}})],1):t._e()],1)})),0)}),g=[],b=n("5530"),_=(n("d81d"),n("a9e3"),n("0874")),O={name:"NavigationList",components:{"v-icon":_["a"]},data:function(){return{}},computed:{routeValue:function(){return this.$route},menuItems:function(){var t=this;return this.routes.map((function(e){return Object(b["a"])(Object(b["a"])({},e),{},{showChildren:t.isRouteSelected(e)})}))}},props:{routes:{type:Array,default:function(){return[]}},depth:{type:Number,default:0}},methods:{onItemClick:function(t,e){t.children.length&&this.toggleChildren(t)},toggleMenu:function(){this.onItemClick()},toggleChildren:function(t){t.showChildren=!t.showChildren,this.$forceUpdate()},isRouteSelected:function(t){var e=this;return t.name===this.$route.name||(t.children.length?t.children.some((function(t){return e.isRouteSelected(t)})):void 0)}},mounted:function(){},created:function(){}},y=O,E=(n("7020"),Object(s["a"])(y,v,g,!1,null,"2f690575",null)),j=E.exports,w=(n("caad"),n("2532"),{hasGroupsAll:function(t,e){var n=t.filter((function(t){return e.includes(t)}));return n.length===e.length},hasGroupsAny:function(t,e){var n=t.filter((function(t){return e.includes(t)}));return n.length>0}}),R={name:"NavigationMenu",components:{"v-icon":_["a"],NavigationList:j},props:{collapsedOnStart:{type:Boolean,default:!0}},data:function(){return{collapsed:this.collapsedOnStart}},computed:{routes:function(){var t=this;return this.$router.options.routes.filter((function(e){return e.meta.visible&&t.checkRouteGroups(e)}))}},methods:{toggleMenu:function(){this.collapsed=!this.collapsed},checkRouteGroups:function(t){var e=this;return t.children.length?(t.children=t.children.filter((function(t){return e.checkRouteGroups(t)})),!!t.children.length):w.hasGroupsAny(this.$store.state.session.user.groups,t.meta.authGroups)},changeRoute:function(t){this.$router.push({path:t.path}).catch((function(t){})),this.collapsed=!0}},created:function(){var t=this;window.addEventListener("click",(function(e){var n=e.path||e.composedPath&&e.composedPath(),r=!n.find((function(t){return"menu-sidebar"===t.className}));r&&!t.collapsed&&(t.collapsed=!0)}))},mounted:function(){var t=this;this.$router.afterEach((function(e,n){t.collapsed=!0}))}},k=R,T=(n("3321"),Object(s["a"])(k,p,m,!1,null,"59576e54",null)),C=T.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logout-button",attrs:{title:"Выйти из аккаунта "+t.username},on:{click:t.logout}})},S=[],A={name:"Logout",computed:{username:function(){return this.$store.state.session.user.username}},methods:{logout:function(){window.location.href="/auth/logout"}}},q=A,U=(n("1b1b"),Object(s["a"])(q,L,S,!1,null,"55163cf5",null)),$=U.exports,x={name:"Header",components:{NavigationMenu:C,Logout:$},props:{showNavigationMenu:{type:Boolean,default:!1}},computed:{},methods:{},mounted:function(){}},G=x,I=(n("24d6"),Object(s["a"])(G,d,h,!1,null,"9e682af8",null)),P=(I.exports,function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),F=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer"},[n("span",{staticClass:"copyrights"})])}],N={name:"Footer",components:{},props:{},computed:{},methods:{},mounted:function(){}},M=N,B=(n("5dcf"),Object(s["a"])(M,P,F,!1,null,"6c6472b0",null)),H=(B.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")}),K=[],V={name:"Aside"},D=V,J=Object(s["a"])(D,H,K,!1,null,"6430c831",null),z=(J.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")}),Q=[],W={data:function(){return{}},computed:{defaultViewKey:function(){return this.$route.name},title:function(){return this.$route.meta.title}},created:function(){},mounted:function(){}},X=W,Y=Object(s["a"])(X,z,Q,!1,null,null,null);Y.exports;r["a"].use(f["a"]);var Z,tt,et=new f["a"]({routes:[{path:"/",name:"home",components:{default:function(){return n.e("chunk-ffe64214").then(n.bind(null,"bb51"))}},meta:{title:"Аналитика",description:"",viewTitle:"",viewDescription:"",icon:"",visible:!1,authGroups:[]},children:[]}]}),nt=et,rt=n("2f62"),ot=n("ade3"),at=(n("c740"),n("a434"),{AUTH:"auth",LOGOUT:"logout",TOGGLE_FILTER:"toggleFilter",CLEAR_ALL_FILTERS:"clearAllFilters"}),it={SET_USER:"setUser",AUTH_ERROR:"authError",TOGGLE_FILTER:"toggleFilter",SET_FILTERS:"setFilters"},ut=n("53ca"),st=n("d4ec"),ct=n("bee2"),lt=n("262e"),ft=n("2caf"),dt=n("2179"),ht=n("1dd4"),pt=function(){function t(){Object(st["a"])(this,t),this.transport=new dt["a"](ht["a"].data.api.http),this.defaultResponseHandler=function(t){return t.data}}return Object(ct["a"])(t,[{key:"fakeResponse",value:function(t){return new Promise((function(e){e(t())}))}}]),t}(),mt=function(t){Object(lt["a"])(n,t);var e=Object(ft["a"])(n);function n(){return Object(st["a"])(this,n),e.apply(this,arguments)}return Object(ct["a"])(n,[{key:"getCurrent",value:function(){var t=function(t){return"object"!==Object(ut["a"])(t.data)&&(document.location.href=ht["a"].data.api.http.authURL),t.data.groups=t.data.groups.map((function(t){return t.name})),t.data};return this.transport.request("auth/info",{},t,"get",{withCredentials:!0,crossDomain:!0,origin:ht["a"].data.api.http.baseURL})}},{key:"getGroupsList",value:function(){return new Promise((function(t){t(["admin_tech","admin_business"])}))}}],[{key:"userEntity",value:function(){return{_id:"",email:"",username:"",directory:"",password:"",isAdmin:!1,groups:[]}}}]),n}(pt),vt={state:{user:{},status:"",filters:[]},mutations:(Z={},Object(ot["a"])(Z,it.SET_USER,(function(t,e){t.user=Object(b["a"])(Object(b["a"])({},t.user),e)})),Object(ot["a"])(Z,it.SET_FILTERS,(function(t,e){t.filters=e})),Object(ot["a"])(Z,it.TOGGLE_FILTER,(function(t,e){var n=t.filters.findIndex((function(t){return t.name===e.name&&t.value===e.value})),r=-1===n;e.excludeOther?t.filters=r?[Object(b["a"])({},e)]:[]:r?t.filters.push(Object(b["a"])({},e)):t.filters.splice(n,1)})),Object(ot["a"])(Z,it.AUTH_ERROR,(function(t,e){t.status="error"})),Z),actions:(tt={},Object(ot["a"])(tt,at.AUTH,(function(t){return new Promise((function(e,n){var r=new mt;r.getCurrent().then((function(n){t.commit(it.SET_USER,n),e()})).catch((function(t){var e=ht["a"].data.api.http.authURL+"?redirect="+encodeURIComponent(window.location.href);t.response?401===t.response.status&&(window.location.href=e):document.body.innerHTML=t.message}))}))})),Object(ot["a"])(tt,at.LOGOUT,(function(t,e){})),Object(ot["a"])(tt,at.TOGGLE_FILTER,(function(t,e){t.commit(it.TOGGLE_FILTER,e)})),Object(ot["a"])(tt,at.CLEAR_ALL_FILTERS,(function(t){t.commit(it.SET_FILTERS,[])})),tt),getters:{}},gt=vt;r["a"].use(rt["a"]);var bt=!1,_t=new rt["a"].Store({strict:bt,devtools:bt,modules:{session:gt}});n("d06d");r["a"].config.productionTip=!1,nt.beforeEach((function(t,e,n){document.title=t.meta.title,n()})),ht["a"].init().then((function(){new r["a"]({router:nt,store:_t,render:function(t){return t(l)}}).$mount("#app")}))},"5dcf":function(t,e,n){"use strict";n("625f")},"625f":function(t,e,n){},7020:function(t,e,n){"use strict";n("727b")},"727b":function(t,e,n){},"85ec":function(t,e,n){},d7cc:function(t,e,n){}});
//# sourceMappingURL=app.2adcb6cd.js.map